"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/viewer/[imageId]",{

/***/ "./pages/viewer/[imageId].js":
/*!***********************************!*\
  !*** ./pages/viewer/[imageId].js ***!
  \***********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/router */ \"./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/head */ \"./node_modules/next/head.js\");\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_head__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/link */ \"./node_modules/next/link.js\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _barrel_optimize_names_Alert_Button_ListGroup_Offcanvas_Spinner_react_bootstrap__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! __barrel_optimize__?names=Alert,Button,ListGroup,Offcanvas,Spinner!=!react-bootstrap */ \"__barrel_optimize__?names=Alert,Button,ListGroup,Offcanvas,Spinner!=!./node_modules/react-bootstrap/esm/index.js\");\n\nvar _s = $RefreshSig$();\n\n\n\n\n\n// Style cho nền Công nghệ/Cyberpunk (Đảm bảo full screen)\nconst techViewerStyle = {\n    minHeight: \"100vh\",\n    backgroundColor: \"#1C0E30\",\n    color: \"#00F2F2\",\n    fontFamily: \"monospace, sans-serif\",\n    position: \"relative\",\n    padding: 0,\n    margin: 0\n};\n// Custom styles for OpenSeadragon container\nconst viewerContainerStyle = {\n    width: \"100%\",\n    height: \"100vh\",\n    border: \"1px solid #FF00FF\",\n    boxShadow: \"0 0 10px rgba(255, 0, 255, 0.5)\",\n    position: \"relative\",\n    backgroundColor: \"black\"\n};\n// Helper function to create marker overlay element\nconst createOverlayElement = (note)=>{\n    const container = document.createElement(\"div\");\n    container.id = \"note-\".concat(note.id);\n    container.style.display = \"flex\";\n    container.style.alignItems = \"center\";\n    container.style.gap = \"6px\";\n    container.style.zIndex = 100;\n    // marker (dot)\n    const marker = document.createElement(\"div\");\n    marker.style.width = \"16px\";\n    marker.style.height = \"16px\";\n    marker.style.background = \"#FF00FF\"; // Marker hồng neon\n    marker.style.borderRadius = \"50%\";\n    marker.style.border = \"2px solid #00F2F2\"; // Viền xanh neon\n    marker.style.boxShadow = \"0 0 8px rgba(255,0,255,0.8)\";\n    marker.style.cursor = \"pointer\";\n    // text label\n    const label = document.createElement(\"div\");\n    label.id = \"note-\".concat(note.id, \"-label\");\n    label.className = \"note-label\";\n    label.innerText = note.text || \"\";\n    label.style.background = \"rgba(0,0,0,0.8)\";\n    label.style.color = \"#00F2F2\";\n    label.style.fontSize = \"12px\";\n    label.style.padding = \"2px 6px\";\n    label.style.borderRadius = \"4px\";\n    label.style.maxWidth = \"120px\";\n    label.style.overflow = \"hidden\";\n    label.style.textOverflow = \"ellipsis\";\n    label.style.whiteSpace = \"nowrap\";\n    container.appendChild(marker);\n    container.appendChild(label);\n    [\n        \"mousedown\",\n        \"mouseup\",\n        \"click\"\n    ].forEach((ev)=>{\n        container.addEventListener(ev, (e)=>e.stopPropagation());\n    });\n    return container;\n};\nconst Viewer = ()=>{\n    _s();\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const { imageId } = router.query;\n    const openseadragonContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const viewerInstanceRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [image, setImage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [notes, setNotes] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [showSidebar, setShowSidebar] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Helper to add overlay\n    const addOverlay = (note, OpenSeadragon, viewer)=>{\n        const container = createOverlayElement(note);\n        viewer.addOverlay({\n            element: container,\n            location: new OpenSeadragon.Point(note.x, note.y)\n        });\n    };\n    // Fetch image\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        async function fetchImage() {\n            try {\n                const response = await fetch(\"/api/images\");\n                if (!response.ok) throw new Error(\"Failed to retrieve system image data.\");\n                const data = await response.json();\n                const foundImage = data.find((img)=>img.id === imageId);\n                if (foundImage) setImage(foundImage);\n                else setError(\"Error: Target image file not found in directory.\");\n            } catch (err) {\n                setError(err.message);\n            }\n        }\n        if (imageId) fetchImage();\n    }, [\n        imageId\n    ]);\n    // Init viewer\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if ( true && image && openseadragonContainerRef.current && viewerInstanceRef.current === null) {\n            __webpack_require__.e(/*! import() */ \"node_modules_openseadragon_build_openseadragon_openseadragon_js\").then(__webpack_require__.t.bind(__webpack_require__, /*! openseadragon */ \"./node_modules/openseadragon/build/openseadragon/openseadragon.js\", 23)).then((OpenSeadragonModule)=>{\n                const OpenSeadragon = OpenSeadragonModule.default;\n                const viewer = OpenSeadragon({\n                    element: openseadragonContainerRef.current,\n                    prefixUrl: \"https://openseadragon.github.io/openseadragon/images/\",\n                    tileSources: image.tileSource,\n                    animationTime: 0.5,\n                    blendTime: 0.1,\n                    constrainDuringPan: true,\n                    maxZoomPixelRatio: 2,\n                    minZoomLevel: 1,\n                    visibilityRatio: 1,\n                    zoomPerScroll: 2\n                });\n                viewerInstanceRef.current = viewer;\n                // Only hide loading once viewer is ready\n                viewer.addHandler(\"open\", ()=>{\n                    setTimeout(()=>{\n                        setLoading(false);\n                    }, 2000);\n                });\n                // Load notes from local storage\n                const saved = localStorage.getItem(\"notes_\".concat(imageId));\n                if (saved) {\n                    const parsed = JSON.parse(saved);\n                    setNotes(parsed);\n                    parsed.forEach((note)=>{\n                        addOverlay(note, OpenSeadragon, viewer);\n                    });\n                }\n                // Click to add marker\n                viewer.addHandler(\"canvas-click\", function(event) {\n                    if (!event.quick) return;\n                    const viewportPoint = viewer.viewport.pointFromPixel(event.position);\n                    const newNote = {\n                        id: Date.now(),\n                        x: viewportPoint.x,\n                        y: viewportPoint.y,\n                        text: \"\"\n                    };\n                    setNotes((prev)=>{\n                        const updated = [\n                            ...prev,\n                            newNote\n                        ];\n                        localStorage.setItem(\"notes_\".concat(imageId), JSON.stringify(updated));\n                        return updated;\n                    });\n                    addOverlay(newNote, OpenSeadragon, viewer);\n                });\n            });\n        }\n        return ()=>{\n            if (viewerInstanceRef.current) {\n                viewerInstanceRef.current.destroy();\n                viewerInstanceRef.current = null;\n            }\n        };\n    }, [\n        image\n    ]);\n    // ----------------- UI render -----------------\n    if (loading && !image) return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"text-center mt-5\",\n        style: techViewerStyle,\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Alert_Button_ListGroup_Offcanvas_Spinner_react_bootstrap__WEBPACK_IMPORTED_MODULE_5__.Spinner, {\n                animation: \"border\",\n                variant: \"info\",\n                role: \"status\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"visually-hidden\",\n                    children: \"Loading data stream...\"\n                }, void 0, false, {\n                    fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                    lineNumber: 189,\n                    columnNumber: 21\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                lineNumber: 188,\n                columnNumber: 17\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                className: \"mt-2\",\n                style: {\n                    color: \"#00F2F2\"\n                },\n                children: \"Loading data stream...\"\n            }, void 0, false, {\n                fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                lineNumber: 191,\n                columnNumber: 17\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n        lineNumber: 187,\n        columnNumber: 13\n    }, undefined);\n    if (error) return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"text-center mt-5\",\n        style: techViewerStyle,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Alert_Button_ListGroup_Offcanvas_Spinner_react_bootstrap__WEBPACK_IMPORTED_MODULE_5__.Alert, {\n            variant: \"danger\",\n            children: [\n                \"Error: \",\n                error,\n                \" \",\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_link__WEBPACK_IMPORTED_MODULE_4___default()), {\n                    href: \"/\",\n                    className: \"text-danger\",\n                    children: \"Return to Main Grid\"\n                }, void 0, false, {\n                    fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                    lineNumber: 199,\n                    columnNumber: 36\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n            lineNumber: 198,\n            columnNumber: 17\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n        lineNumber: 197,\n        columnNumber: 13\n    }, undefined);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        style: techViewerStyle,\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_head__WEBPACK_IMPORTED_MODULE_3___default()), {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"title\", {\n                        children: [\n                            \"Viewing: \",\n                            (image === null || image === void 0 ? void 0 : image.title) || \"Data File\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                        lineNumber: 207,\n                        columnNumber: 17\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"style\", {\n                        children: \"\\n                    body { overflow: hidden; } \\n                    /* Customizing Bootstrap components for Cyberpunk theme */\\n                    .offcanvas-header { background: #2A1A40; border-bottom: 1px solid #FF00FF; color: #FF00FF; }\\n                    .offcanvas-body { background: #1C0E30; color: #00F2F2; }\\n                    .offcanvas-title { color: #FF00FF; }\\n                    .btn-close { filter: invert(1) hue-rotate(180deg); }\\n                    .list-group-item { background: #2A1A40; border-color: #3A3A60; color: #00F2F2; }\\n                    .form-control { background: #1C0E30; border-color: #00F2F2; color: #FF00FF; }\\n                \"\n                    }, void 0, false, {\n                        fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                        lineNumber: 208,\n                        columnNumber: 17\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                lineNumber: 206,\n                columnNumber: 13\n            }, undefined),\n            loading && image && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    position: \"fixed\",\n                    top: 0,\n                    left: 0,\n                    width: \"100%\",\n                    height: \"100%\",\n                    background: \"rgba(0,0,0,0.9)\",\n                    display: \"flex\",\n                    flexDirection: \"column\",\n                    justifyContent: \"center\",\n                    alignItems: \"center\",\n                    zIndex: 2000,\n                    color: \"#00F2F2\",\n                    fontFamily: \"monospace, sans-serif\"\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Alert_Button_ListGroup_Offcanvas_Spinner_react_bootstrap__WEBPACK_IMPORTED_MODULE_5__.Spinner, {\n                        animation: \"grow\",\n                        variant: \"danger\",\n                        role: \"status\",\n                        style: {\n                            width: \"3rem\",\n                            height: \"3rem\"\n                        }\n                    }, void 0, false, {\n                        fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                        lineNumber: 239,\n                        columnNumber: 21\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        style: {\n                            marginTop: \"20px\",\n                            letterSpacing: \"2px\",\n                            color: \"#FF00FF\"\n                        },\n                        children: \"INITIALIZING DISPLAY MATRIX...\"\n                    }, void 0, false, {\n                        fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                        lineNumber: 240,\n                        columnNumber: 21\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        style: {\n                            opacity: 0.8,\n                            color: \"#00F2F2\"\n                        },\n                        children: \"OpenSeadragon Engine v2.4 running.\"\n                    }, void 0, false, {\n                        fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                        lineNumber: 243,\n                        columnNumber: 21\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                lineNumber: 222,\n                columnNumber: 17\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: openseadragonContainerRef,\n                className: \"viewer\",\n                style: viewerContainerStyle,\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        position: \"absolute\",\n                        top: \"12px\",\n                        right: \"12px\",\n                        display: \"flex\",\n                        flexDirection: \"column\",\n                        gap: \"8px\",\n                        zIndex: 1000\n                    },\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Alert_Button_ListGroup_Offcanvas_Spinner_react_bootstrap__WEBPACK_IMPORTED_MODULE_5__.Button, {\n                            size: \"sm\",\n                            variant: \"info\",\n                            onClick: ()=>setShowSidebar(true),\n                            children: \"\\uD83D\\uDCD1 ACCESS LOGS\"\n                        }, void 0, false, {\n                            fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                            lineNumber: 266,\n                            columnNumber: 21\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Alert_Button_ListGroup_Offcanvas_Spinner_react_bootstrap__WEBPACK_IMPORTED_MODULE_5__.Button, {\n                            size: \"sm\",\n                            variant: \"danger\",\n                            onClick: ()=>{\n                                const viewer = viewerInstanceRef.current;\n                                if (viewer) {\n                                    // Xóa toàn bộ overlay khỏi viewer\n                                    notes.forEach((note)=>{\n                                        const el = document.querySelector(\"#note-\".concat(note.id));\n                                        if (el) viewer.removeOverlay(el);\n                                    });\n                                }\n                                // Xóa dữ liệu khỏi state và localStorage\n                                setNotes([]);\n                                localStorage.removeItem(\"notes_\".concat(imageId));\n                            },\n                            children: \"\\uD83D\\uDDD1 ERASE ALL LOGS\"\n                        }, void 0, false, {\n                            fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                            lineNumber: 273,\n                            columnNumber: 21\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                    lineNumber: 255,\n                    columnNumber: 17\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                lineNumber: 249,\n                columnNumber: 13\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    position: \"fixed\",\n                    bottom: \"20px\",\n                    left: \"20px\",\n                    zIndex: 1000\n                },\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_link__WEBPACK_IMPORTED_MODULE_4___default()), {\n                    href: \"/\",\n                    passHref: true,\n                    legacyBehavior: true,\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Alert_Button_ListGroup_Offcanvas_Spinner_react_bootstrap__WEBPACK_IMPORTED_MODULE_5__.Button, {\n                        variant: \"outline-danger\",\n                        className: \"shadow-lg\",\n                        style: {\n                            color: \"#FF00FF\",\n                            borderColor: \"#FF00FF\"\n                        },\n                        children: \"← EXIT GRID (MAIN HUB)\"\n                    }, void 0, false, {\n                        fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                        lineNumber: 298,\n                        columnNumber: 21\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                    lineNumber: 297,\n                    columnNumber: 17\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                lineNumber: 296,\n                columnNumber: 13\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Alert_Button_ListGroup_Offcanvas_Spinner_react_bootstrap__WEBPACK_IMPORTED_MODULE_5__.Offcanvas, {\n                show: showSidebar,\n                onHide: ()=>setShowSidebar(false),\n                placement: \"end\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Alert_Button_ListGroup_Offcanvas_Spinner_react_bootstrap__WEBPACK_IMPORTED_MODULE_5__.Offcanvas.Header, {\n                        closeButton: true,\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Alert_Button_ListGroup_Offcanvas_Spinner_react_bootstrap__WEBPACK_IMPORTED_MODULE_5__.Offcanvas.Title, {\n                            children: \"\\uD83D\\uDCD1 LOGGED ANOMALIES\"\n                        }, void 0, false, {\n                            fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                            lineNumber: 312,\n                            columnNumber: 21\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                        lineNumber: 311,\n                        columnNumber: 17\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Alert_Button_ListGroup_Offcanvas_Spinner_react_bootstrap__WEBPACK_IMPORTED_MODULE_5__.Offcanvas.Body, {\n                        children: notes.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            style: {\n                                color: \"#00F2F2\"\n                            },\n                            children: \"No anomalies logged yet. Click the image to tag a point.\"\n                        }, void 0, false, {\n                            fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                            lineNumber: 316,\n                            columnNumber: 25\n                        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Alert_Button_ListGroup_Offcanvas_Spinner_react_bootstrap__WEBPACK_IMPORTED_MODULE_5__.ListGroup, {\n                            children: notes.map((note, idx)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Alert_Button_ListGroup_Offcanvas_Spinner_react_bootstrap__WEBPACK_IMPORTED_MODULE_5__.ListGroup.Item, {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            style: {\n                                                color: \"#FF00FF\"\n                                            },\n                                            children: [\n                                                \"\\uD83D\\uDD34 Anomaly #\",\n                                                idx + 1\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                                            lineNumber: 321,\n                                            columnNumber: 37\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            type: \"text\",\n                                            className: \"form-control mt-2\",\n                                            placeholder: \"Enter system note...\",\n                                            value: note.text || \"\",\n                                            onChange: (e)=>{\n                                                const newText = e.target.value;\n                                                setNotes((prev)=>{\n                                                    const updated = prev.map((n)=>n.id === note.id ? {\n                                                            ...n,\n                                                            text: newText\n                                                        } : n);\n                                                    localStorage.setItem(\"notes_\".concat(imageId), JSON.stringify(updated));\n                                                    // Update label next to marker\n                                                    const el = document.querySelector(\"#note-\".concat(note.id, \"-label\"));\n                                                    if (el) el.innerText = newText;\n                                                    return updated;\n                                                });\n                                            }\n                                        }, void 0, false, {\n                                            fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                                            lineNumber: 322,\n                                            columnNumber: 37\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"mt-2 d-flex justify-content-between\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Alert_Button_ListGroup_Offcanvas_Spinner_react_bootstrap__WEBPACK_IMPORTED_MODULE_5__.Button, {\n                                                    size: \"sm\",\n                                                    variant: \"outline-info\",\n                                                    onClick: ()=>{\n                                                        const viewer = viewerInstanceRef.current;\n                                                        if (viewer) {\n                                                            viewer.viewport.panTo({\n                                                                x: note.x,\n                                                                y: note.y\n                                                            });\n                                                            viewer.viewport.zoomTo(2.5);\n                                                            setShowSidebar(false);\n                                                        }\n                                                    },\n                                                    children: \"\\uD83D\\uDC41 LOCATE\"\n                                                }, void 0, false, {\n                                                    fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                                                    lineNumber: 345,\n                                                    columnNumber: 41\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Alert_Button_ListGroup_Offcanvas_Spinner_react_bootstrap__WEBPACK_IMPORTED_MODULE_5__.Button, {\n                                                    size: \"sm\",\n                                                    variant: \"outline-danger\",\n                                                    onClick: ()=>{\n                                                        const viewer = viewerInstanceRef.current;\n                                                        const markerContainer = document.querySelector(\"#note-\".concat(note.id));\n                                                        if (viewer && markerContainer) {\n                                                            viewer.removeOverlay(markerContainer);\n                                                        }\n                                                        setNotes((prev)=>{\n                                                            const updated = prev.filter((n)=>n.id !== note.id);\n                                                            localStorage.setItem(\"notes_\".concat(imageId), JSON.stringify(updated));\n                                                            return updated;\n                                                        });\n                                                    },\n                                                    children: \"❌ DELETE LOG\"\n                                                }, void 0, false, {\n                                                    fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                                                    lineNumber: 359,\n                                                    columnNumber: 41\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                                            lineNumber: 344,\n                                            columnNumber: 37\n                                        }, undefined)\n                                    ]\n                                }, note.id, true, {\n                                    fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                                    lineNumber: 320,\n                                    columnNumber: 33\n                                }, undefined))\n                        }, void 0, false, {\n                            fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                            lineNumber: 318,\n                            columnNumber: 25\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                        lineNumber: 314,\n                        columnNumber: 17\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n                lineNumber: 306,\n                columnNumber: 13\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/root/testttttt/pages/viewer/[imageId].js\",\n        lineNumber: 205,\n        columnNumber: 9\n    }, undefined);\n};\n_s(Viewer, \"AunbKxytO/6Ha+YMD1Yt3YB4HQs=\", false, function() {\n    return [\n        next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter\n    ];\n});\n_c = Viewer;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Viewer);\nvar _c;\n$RefreshReg$(_c, \"Viewer\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aUI7NERBQzNCdEcsT0FBTzJFLGFBQWEsQ0FBQzJCO3dEQUN6Qjt3REFFQTNHLFNBQVMsQ0FBQ3FEOzREQUNOLE1BQU1DLFVBQVVELEtBQUt1RCxNQUFNLENBQUMsQ0FBQ0osSUFBTUEsRUFBRTlJLEVBQUUsS0FBS0osS0FBS0ksRUFBRTs0REFDbkQ4RSxhQUFhZSxPQUFPLENBQ2hCLFNBQWlCLE9BQVJsRSxVQUNUc0QsS0FBS2EsU0FBUyxDQUFDRjs0REFFbkIsT0FBT0E7d0RBQ1g7b0RBQ0o7OERBQ0g7Ozs7Ozs7Ozs7Ozs7bUNBMURZaEcsS0FBS0ksRUFBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBd0U1RDtHQS9UTXlCOztRQUNhbkQsa0RBQVNBOzs7S0FEdEJtRDtBQWlVTiwrREFBZUEsTUFBTUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9wYWdlcy92aWV3ZXIvW2ltYWdlSWRdLmpzP2NkODIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tIFwibmV4dC9yb3V0ZXJcIjtcbmltcG9ydCBIZWFkIGZyb20gXCJuZXh0L2hlYWRcIjtcbmltcG9ydCBMaW5rIGZyb20gJ25leHQvbGluayc7XG5pbXBvcnQgeyBTcGlubmVyLCBBbGVydCwgQnV0dG9uLCBMaXN0R3JvdXAsIE9mZmNhbnZhcyB9IGZyb20gXCJyZWFjdC1ib290c3RyYXBcIjtcblxuLy8gU3R5bGUgY2hvIG7hu4FuIEPDtG5nIG5naOG7hy9DeWJlcnB1bmsgKMSQ4bqjbSBi4bqjbyBmdWxsIHNjcmVlbilcbmNvbnN0IHRlY2hWaWV3ZXJTdHlsZSA9IHtcbiAgICBtaW5IZWlnaHQ6ICcxMDB2aCcsXG4gICAgYmFja2dyb3VuZENvbG9yOiAnIzFDMEUzMCcsIFxuICAgIGNvbG9yOiAnIzAwRjJGMicsIFxuICAgIGZvbnRGYW1pbHk6ICdtb25vc3BhY2UsIHNhbnMtc2VyaWYnLFxuICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLCBcbiAgICBwYWRkaW5nOiAwLFxuICAgIG1hcmdpbjogMCxcbn07XG5cbi8vIEN1c3RvbSBzdHlsZXMgZm9yIE9wZW5TZWFkcmFnb24gY29udGFpbmVyXG5jb25zdCB2aWV3ZXJDb250YWluZXJTdHlsZSA9IHtcbiAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgaGVpZ2h0OiBcIjEwMHZoXCIsIFxuICAgIGJvcmRlcjogXCIxcHggc29saWQgI0ZGMDBGRlwiLCBcbiAgICBib3hTaGFkb3c6ICcwIDAgMTBweCByZ2JhKDI1NSwgMCwgMjU1LCAwLjUpJyxcbiAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuICAgIGJhY2tncm91bmRDb2xvcjogJ2JsYWNrJyBcbn07XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgbWFya2VyIG92ZXJsYXkgZWxlbWVudFxuY29uc3QgY3JlYXRlT3ZlcmxheUVsZW1lbnQgPSAobm90ZSkgPT4ge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY29udGFpbmVyLmlkID0gYG5vdGUtJHtub3RlLmlkfWA7XG4gICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICBjb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XG4gICAgY29udGFpbmVyLnN0eWxlLmdhcCA9IFwiNnB4XCI7XG4gICAgY29udGFpbmVyLnN0eWxlLnpJbmRleCA9IDEwMDsgXG5cbiAgICAvLyBtYXJrZXIgKGRvdClcbiAgICBjb25zdCBtYXJrZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG1hcmtlci5zdHlsZS53aWR0aCA9IFwiMTZweFwiO1xuICAgIG1hcmtlci5zdHlsZS5oZWlnaHQgPSBcIjE2cHhcIjtcbiAgICBtYXJrZXIuc3R5bGUuYmFja2dyb3VuZCA9IFwiI0ZGMDBGRlwiOyAvLyBNYXJrZXIgaOG7k25nIG5lb25cbiAgICBtYXJrZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI1MCVcIjtcbiAgICBtYXJrZXIuc3R5bGUuYm9yZGVyID0gXCIycHggc29saWQgIzAwRjJGMlwiOyAvLyBWaeG7gW4geGFuaCBuZW9uXG4gICAgbWFya2VyLnN0eWxlLmJveFNoYWRvdyA9IFwiMCAwIDhweCByZ2JhKDI1NSwwLDI1NSwwLjgpXCI7XG4gICAgbWFya2VyLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuXG4gICAgLy8gdGV4dCBsYWJlbFxuICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBsYWJlbC5pZCA9IGBub3RlLSR7bm90ZS5pZH0tbGFiZWxgO1xuICAgIGxhYmVsLmNsYXNzTmFtZSA9IFwibm90ZS1sYWJlbFwiO1xuICAgIGxhYmVsLmlubmVyVGV4dCA9IG5vdGUudGV4dCB8fCBcIlwiO1xuICAgIGxhYmVsLnN0eWxlLmJhY2tncm91bmQgPSBcInJnYmEoMCwwLDAsMC44KVwiO1xuICAgIGxhYmVsLnN0eWxlLmNvbG9yID0gXCIjMDBGMkYyXCI7IFxuICAgIGxhYmVsLnN0eWxlLmZvbnRTaXplID0gXCIxMnB4XCI7XG4gICAgbGFiZWwuc3R5bGUucGFkZGluZyA9IFwiMnB4IDZweFwiO1xuICAgIGxhYmVsLnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNHB4XCI7XG4gICAgbGFiZWwuc3R5bGUubWF4V2lkdGggPSBcIjEyMHB4XCI7XG4gICAgbGFiZWwuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuICAgIGxhYmVsLnN0eWxlLnRleHRPdmVyZmxvdyA9IFwiZWxsaXBzaXNcIjtcbiAgICBsYWJlbC5zdHlsZS53aGl0ZVNwYWNlID0gXCJub3dyYXBcIjtcblxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChtYXJrZXIpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChsYWJlbCk7XG5cbiAgICBbXCJtb3VzZWRvd25cIiwgXCJtb3VzZXVwXCIsIFwiY2xpY2tcIl0uZm9yRWFjaCgoZXYpID0+IHtcbiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoZXYsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gY29udGFpbmVyO1xufTtcblxuXG5jb25zdCBWaWV3ZXIgPSAoKSA9PiB7XG4gICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gICAgY29uc3QgeyBpbWFnZUlkIH0gPSByb3V0ZXIucXVlcnk7XG4gICAgY29uc3Qgb3BlbnNlYWRyYWdvbkNvbnRhaW5lclJlZiA9IHVzZVJlZihudWxsKTtcbiAgICBjb25zdCB2aWV3ZXJJbnN0YW5jZVJlZiA9IHVzZVJlZihudWxsKTtcblxuICAgIGNvbnN0IFtpbWFnZSwgc2V0SW1hZ2VdID0gdXNlU3RhdGUobnVsbCk7XG4gICAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gICAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICBjb25zdCBbbm90ZXMsIHNldE5vdGVzXSA9IHVzZVN0YXRlKFtdKTtcbiAgICBjb25zdCBbc2hvd1NpZGViYXIsIHNldFNob3dTaWRlYmFyXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICAgIC8vIEhlbHBlciB0byBhZGQgb3ZlcmxheVxuICAgIGNvbnN0IGFkZE92ZXJsYXkgPSAobm90ZSwgT3BlblNlYWRyYWdvbiwgdmlld2VyKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGNyZWF0ZU92ZXJsYXlFbGVtZW50KG5vdGUpO1xuICAgICAgICB2aWV3ZXIuYWRkT3ZlcmxheSh7XG4gICAgICAgICAgICBlbGVtZW50OiBjb250YWluZXIsXG4gICAgICAgICAgICBsb2NhdGlvbjogbmV3IE9wZW5TZWFkcmFnb24uUG9pbnQobm90ZS54LCBub3RlLnkpLFxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gRmV0Y2ggaW1hZ2VcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBhc3luYyBmdW5jdGlvbiBmZXRjaEltYWdlKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2FwaS9pbWFnZXNcIik7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHJldHJpZXZlIHN5c3RlbSBpbWFnZSBkYXRhLlwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kSW1hZ2UgPSBkYXRhLmZpbmQoKGltZykgPT4gaW1nLmlkID09PSBpbWFnZUlkKTtcbiAgICAgICAgICAgICAgICBpZiAoZm91bmRJbWFnZSkgc2V0SW1hZ2UoZm91bmRJbWFnZSk7XG4gICAgICAgICAgICAgICAgZWxzZSBzZXRFcnJvcihcIkVycm9yOiBUYXJnZXQgaW1hZ2UgZmlsZSBub3QgZm91bmQgaW4gZGlyZWN0b3J5LlwiKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHNldEVycm9yKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaW1hZ2VJZCkgZmV0Y2hJbWFnZSgpO1xuICAgIH0sIFtpbWFnZUlkXSk7XG5cbiAgICAvLyBJbml0IHZpZXdlclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgICAgICAgIGltYWdlICYmXG4gICAgICAgICAgICBvcGVuc2VhZHJhZ29uQ29udGFpbmVyUmVmLmN1cnJlbnQgJiZcbiAgICAgICAgICAgIHZpZXdlckluc3RhbmNlUmVmLmN1cnJlbnQgPT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBpbXBvcnQoXCJvcGVuc2VhZHJhZ29uXCIpLnRoZW4oKE9wZW5TZWFkcmFnb25Nb2R1bGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBPcGVuU2VhZHJhZ29uID0gT3BlblNlYWRyYWdvbk1vZHVsZS5kZWZhdWx0O1xuICAgICAgICAgICAgICAgIGNvbnN0IHZpZXdlciA9IE9wZW5TZWFkcmFnb24oe1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBvcGVuc2VhZHJhZ29uQ29udGFpbmVyUmVmLmN1cnJlbnQsXG4gICAgICAgICAgICAgICAgICAgIHByZWZpeFVybDogXCJodHRwczovL29wZW5zZWFkcmFnb24uZ2l0aHViLmlvL29wZW5zZWFkcmFnb24vaW1hZ2VzL1wiLFxuICAgICAgICAgICAgICAgICAgICB0aWxlU291cmNlczogaW1hZ2UudGlsZVNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uVGltZTogMC41LFxuICAgICAgICAgICAgICAgICAgICBibGVuZFRpbWU6IDAuMSxcbiAgICAgICAgICAgICAgICAgICAgY29uc3RyYWluRHVyaW5nUGFuOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtYXhab29tUGl4ZWxSYXRpbzogMixcbiAgICAgICAgICAgICAgICAgICAgbWluWm9vbUxldmVsOiAxLFxuICAgICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5UmF0aW86IDEsXG4gICAgICAgICAgICAgICAgICAgIHpvb21QZXJTY3JvbGw6IDIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmlld2VySW5zdGFuY2VSZWYuY3VycmVudCA9IHZpZXdlcjtcblxuICAgICAgICAgICAgICAgIC8vIE9ubHkgaGlkZSBsb2FkaW5nIG9uY2Ugdmlld2VyIGlzIHJlYWR5XG4gICAgICAgICAgICAgICAgdmlld2VyLmFkZEhhbmRsZXIoXCJvcGVuXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMjAwMCk7IFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gTG9hZCBub3RlcyBmcm9tIGxvY2FsIHN0b3JhZ2VcbiAgICAgICAgICAgICAgICBjb25zdCBzYXZlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGBub3Rlc18ke2ltYWdlSWR9YCk7XG4gICAgICAgICAgICAgICAgaWYgKHNhdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2Uoc2F2ZWQpO1xuICAgICAgICAgICAgICAgICAgICBzZXROb3RlcyhwYXJzZWQpO1xuICAgICAgICAgICAgICAgICAgICBwYXJzZWQuZm9yRWFjaCgobm90ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkT3ZlcmxheShub3RlLCBPcGVuU2VhZHJhZ29uLCB2aWV3ZXIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBDbGljayB0byBhZGQgbWFya2VyXG4gICAgICAgICAgICAgICAgdmlld2VyLmFkZEhhbmRsZXIoXCJjYW52YXMtY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZXZlbnQucXVpY2spIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2aWV3cG9ydFBvaW50ID0gdmlld2VyLnZpZXdwb3J0LnBvaW50RnJvbVBpeGVsKGV2ZW50LnBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Tm90ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgeDogdmlld3BvcnRQb2ludC54LFxuICAgICAgICAgICAgICAgICAgICAgICAgeTogdmlld3BvcnRQb2ludC55LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogXCJcIlxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHNldE5vdGVzKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkID0gWy4uLnByZXYsIG5ld05vdGVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYG5vdGVzXyR7aW1hZ2VJZH1gLCBKU09OLnN0cmluZ2lmeSh1cGRhdGVkKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlZDtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgYWRkT3ZlcmxheShuZXdOb3RlLCBPcGVuU2VhZHJhZ29uLCB2aWV3ZXIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHZpZXdlckluc3RhbmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICB2aWV3ZXJJbnN0YW5jZVJlZi5jdXJyZW50LmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB2aWV3ZXJJbnN0YW5jZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9LCBbaW1hZ2VdKTtcblxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0gVUkgcmVuZGVyIC0tLS0tLS0tLS0tLS0tLS0tXG4gICAgaWYgKGxvYWRpbmcgJiYgIWltYWdlKSBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgbXQtNVwiIHN0eWxlPXt0ZWNoVmlld2VyU3R5bGV9PlxuICAgICAgICAgICAgICAgIDxTcGlubmVyIGFuaW1hdGlvbj1cImJvcmRlclwiIHZhcmlhbnQ9XCJpbmZvXCIgcm9sZT1cInN0YXR1c1wiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ2aXN1YWxseS1oaWRkZW5cIj5Mb2FkaW5nIGRhdGEgc3RyZWFtLi4uPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvU3Bpbm5lcj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtdC0yXCIgc3R5bGU9e3tjb2xvcjogJyMwMEYyRjInfX0+TG9hZGluZyBkYXRhIHN0cmVhbS4uLjwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuXG4gICAgaWYgKGVycm9yKVxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBtdC01XCIgc3R5bGU9e3RlY2hWaWV3ZXJTdHlsZX0+XG4gICAgICAgICAgICAgICAgPEFsZXJ0IHZhcmlhbnQ9XCJkYW5nZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgRXJyb3I6IHtlcnJvcn0gPExpbmsgaHJlZj1cIi9cIiBjbGFzc05hbWU9XCJ0ZXh0LWRhbmdlclwiPlJldHVybiB0byBNYWluIEdyaWQ8L0xpbms+XG4gICAgICAgICAgICAgICAgPC9BbGVydD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBzdHlsZT17dGVjaFZpZXdlclN0eWxlfT5cbiAgICAgICAgICAgIDxIZWFkPlxuICAgICAgICAgICAgICAgIDx0aXRsZT5WaWV3aW5nOiB7aW1hZ2U/LnRpdGxlIHx8IFwiRGF0YSBGaWxlXCJ9PC90aXRsZT5cbiAgICAgICAgICAgICAgICA8c3R5bGU+e2BcbiAgICAgICAgICAgICAgICAgICAgYm9keSB7IG92ZXJmbG93OiBoaWRkZW47IH0gXG4gICAgICAgICAgICAgICAgICAgIC8qIEN1c3RvbWl6aW5nIEJvb3RzdHJhcCBjb21wb25lbnRzIGZvciBDeWJlcnB1bmsgdGhlbWUgKi9cbiAgICAgICAgICAgICAgICAgICAgLm9mZmNhbnZhcy1oZWFkZXIgeyBiYWNrZ3JvdW5kOiAjMkExQTQwOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0ZGMDBGRjsgY29sb3I6ICNGRjAwRkY7IH1cbiAgICAgICAgICAgICAgICAgICAgLm9mZmNhbnZhcy1ib2R5IHsgYmFja2dyb3VuZDogIzFDMEUzMDsgY29sb3I6ICMwMEYyRjI7IH1cbiAgICAgICAgICAgICAgICAgICAgLm9mZmNhbnZhcy10aXRsZSB7IGNvbG9yOiAjRkYwMEZGOyB9XG4gICAgICAgICAgICAgICAgICAgIC5idG4tY2xvc2UgeyBmaWx0ZXI6IGludmVydCgxKSBodWUtcm90YXRlKDE4MGRlZyk7IH1cbiAgICAgICAgICAgICAgICAgICAgLmxpc3QtZ3JvdXAtaXRlbSB7IGJhY2tncm91bmQ6ICMyQTFBNDA7IGJvcmRlci1jb2xvcjogIzNBM0E2MDsgY29sb3I6ICMwMEYyRjI7IH1cbiAgICAgICAgICAgICAgICAgICAgLmZvcm0tY29udHJvbCB7IGJhY2tncm91bmQ6ICMxQzBFMzA7IGJvcmRlci1jb2xvcjogIzAwRjJGMjsgY29sb3I6ICNGRjAwRkY7IH1cbiAgICAgICAgICAgICAgICBgfTwvc3R5bGU+XG4gICAgICAgICAgICA8L0hlYWQ+XG5cbiAgICAgICAgICAgIHsvKiBGdWxsLXNjcmVlbiBMb2FkaW5nIE92ZXJsYXkgKi99XG4gICAgICAgICAgICB7bG9hZGluZyAmJiBpbWFnZSAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwiZml4ZWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IFwiMTAwJVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCJyZ2JhKDAsMCwwLDAuOSlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiZmxleFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmxleERpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiBcImNlbnRlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHpJbmRleDogMjAwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIiMwMEYyRjJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6IFwibW9ub3NwYWNlLCBzYW5zLXNlcmlmXCIsXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8U3Bpbm5lciBhbmltYXRpb249XCJncm93XCIgdmFyaWFudD1cImRhbmdlclwiIHJvbGU9XCJzdGF0dXNcIiBzdHlsZT17eyB3aWR0aDogJzNyZW0nLCBoZWlnaHQ6ICczcmVtJyB9fSAvPlxuICAgICAgICAgICAgICAgICAgICA8aDIgc3R5bGU9e3sgbWFyZ2luVG9wOiBcIjIwcHhcIiwgbGV0dGVyU3BhY2luZzogXCIycHhcIiwgY29sb3I6ICcjRkYwMEZGJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIElOSVRJQUxJWklORyBESVNQTEFZIE1BVFJJWC4uLlxuICAgICAgICAgICAgICAgICAgICA8L2gyPlxuICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT17eyBvcGFjaXR5OiAwLjgsIGNvbG9yOiAnIzAwRjJGMicgfX0+T3BlblNlYWRyYWdvbiBFbmdpbmUgdjIuNCBydW5uaW5nLjwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG5cblxuICAgICAgICAgICAgey8qIENvbnRhaW5lciBWaWV3ZXIgKi99XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgcmVmPXtvcGVuc2VhZHJhZ29uQ29udGFpbmVyUmVmfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInZpZXdlclwiXG4gICAgICAgICAgICAgICAgc3R5bGU9e3ZpZXdlckNvbnRhaW5lclN0eWxlfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHsvKiBGbG9hdGluZyBjb250cm9scyAoVG9wIFJpZ2h0KSAqL31cbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBcIjEycHhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiBcIjEycHhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiZmxleFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmxleERpcmVjdGlvbjogXCJjb2x1bW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhcDogXCI4cHhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHpJbmRleDogMTAwMCxcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PVwiaW5mb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93U2lkZWJhcih0cnVlKX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAg8J+TkSBBQ0NFU1MgTE9HU1xuICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJkYW5nZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpZXdlciA9IHZpZXdlckluc3RhbmNlUmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZpZXdlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBYw7NhIHRvw6BuIGLhu5kgb3ZlcmxheSBraOG7j2kgdmlld2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGVzLmZvckVhY2goKG5vdGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI25vdGUtJHtub3RlLmlkfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsKSB2aWV3ZXIucmVtb3ZlT3ZlcmxheShlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBYw7NhIGThu68gbGnhu4d1IGto4buPaSBzdGF0ZSB2w6AgbG9jYWxTdG9yYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Tm90ZXMoW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGBub3Rlc18ke2ltYWdlSWR9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICDwn5eRIEVSQVNFIEFMTCBMT0dTXG4gICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIHsvKiBCYWNrIEJ1dHRvbiAoQm90dG9tIExlZnQpIC0gRklYOiBVc2UgTGluay9CdXR0b24gKi99XG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHBvc2l0aW9uOiAnZml4ZWQnLCBib3R0b206ICcyMHB4JywgbGVmdDogJzIwcHgnLCB6SW5kZXg6IDEwMDAgfX0+XG4gICAgICAgICAgICAgICAgPExpbmsgaHJlZj1cIi9cIiBwYXNzSHJlZiBsZWdhY3lCZWhhdmlvcj5cbiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PVwib3V0bGluZS1kYW5nZXJcIiBjbGFzc05hbWU9XCJzaGFkb3ctbGdcIiBzdHlsZT17eyBjb2xvcjogJyNGRjAwRkYnLCBib3JkZXJDb2xvcjogJyNGRjAwRkYnIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgJmxhcnI7IEVYSVQgR1JJRCAoTUFJTiBIVUIpXG4gICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgIDwvZGl2PlxuXG5cbiAgICAgICAgICAgIHsvKiBTaWRlYmFyIChPZmZjYW52YXMpIC0gRGFuaCBzw6FjaCBtYXJrZXIgKi99XG4gICAgICAgICAgICA8T2ZmY2FudmFzXG4gICAgICAgICAgICAgICAgc2hvdz17c2hvd1NpZGViYXJ9XG4gICAgICAgICAgICAgICAgb25IaWRlPXsoKSA9PiBzZXRTaG93U2lkZWJhcihmYWxzZSl9XG4gICAgICAgICAgICAgICAgcGxhY2VtZW50PVwiZW5kXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8T2ZmY2FudmFzLkhlYWRlciBjbG9zZUJ1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPE9mZmNhbnZhcy5UaXRsZT7wn5ORIExPR0dFRCBBTk9NQUxJRVM8L09mZmNhbnZhcy5UaXRsZT5cbiAgICAgICAgICAgICAgICA8L09mZmNhbnZhcy5IZWFkZXI+XG4gICAgICAgICAgICAgICAgPE9mZmNhbnZhcy5Cb2R5PlxuICAgICAgICAgICAgICAgICAgICB7bm90ZXMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9e3sgY29sb3I6ICcjMDBGMkYyJyB9fT5ObyBhbm9tYWxpZXMgbG9nZ2VkIHlldC4gQ2xpY2sgdGhlIGltYWdlIHRvIHRhZyBhIHBvaW50LjwvcD5cbiAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxMaXN0R3JvdXA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge25vdGVzLm1hcCgobm90ZSwgaWR4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaXN0R3JvdXAuSXRlbSBrZXk9e25vdGUuaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3tjb2xvcjogJyNGRjAwRkYnfX0+8J+UtCBBbm9tYWx5ICN7aWR4ICsgMX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZm9ybS1jb250cm9sIG10LTJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRW50ZXIgc3lzdGVtIG5vdGUuLi5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtub3RlLnRleHQgfHwgXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VGV4dCA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXROb3RlcygocHJldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IHByZXYubWFwKChuKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uaWQgPT09IG5vdGUuaWQgPyB7IC4uLm4sIHRleHQ6IG5ld1RleHQgfSA6IG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgbm90ZXNfJHtpbWFnZUlkfWAsIEpTT04uc3RyaW5naWZ5KHVwZGF0ZWQpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIGxhYmVsIG5leHQgdG8gbWFya2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNub3RlLSR7bm90ZS5pZH0tbGFiZWxgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbCkgZWwuaW5uZXJUZXh0ID0gbmV3VGV4dDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgZC1mbGV4IGp1c3RpZnktY29udGVudC1iZXR3ZWVuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwic21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50PVwib3V0bGluZS1pbmZvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgdmlld2VyID0gdmlld2VySW5zdGFuY2VSZWYuY3VycmVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2aWV3ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3ZXIudmlld3BvcnQucGFuVG8oeyB4OiBub3RlLngsIHk6IG5vdGUueSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3ZXIudmlld3BvcnQuem9vbVRvKDIuNSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2hvd1NpZGViYXIoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg8J+RgSBMT0NBVEVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lLWRhbmdlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpZXdlciA9IHZpZXdlckluc3RhbmNlUmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXJrZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjbm90ZS0ke25vdGUuaWR9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmlld2VyICYmIG1hcmtlckNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdlci5yZW1vdmVPdmVybGF5KG1hcmtlckNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldE5vdGVzKChwcmV2KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IHByZXYuZmlsdGVyKChuKSA9PiBuLmlkICE9PSBub3RlLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYG5vdGVzXyR7aW1hZ2VJZH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh1cGRhdGVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKdjCBERUxFVEUgTE9HXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaXN0R3JvdXAuSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvTGlzdEdyb3VwPlxuXG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9PZmZjYW52YXMuQm9keT5cbiAgICAgICAgICAgIDwvT2ZmY2FudmFzPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xuXG59O1xuXG5leHBvcnQgZGVmYXVsdCBWaWV3ZXI7Il0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwidXNlUm91dGVyIiwiSGVhZCIsIkxpbmsiLCJTcGlubmVyIiwiQWxlcnQiLCJCdXR0b24iLCJMaXN0R3JvdXAiLCJPZmZjYW52YXMiLCJ0ZWNoVmlld2VyU3R5bGUiLCJtaW5IZWlnaHQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJjb2xvciIsImZvbnRGYW1pbHkiLCJwb3NpdGlvbiIsInBhZGRpbmciLCJtYXJnaW4iLCJ2aWV3ZXJDb250YWluZXJTdHlsZSIsIndpZHRoIiwiaGVpZ2h0IiwiYm9yZGVyIiwiYm94U2hhZG93IiwiY3JlYXRlT3ZlcmxheUVsZW1lbnQiLCJub3RlIiwiY29udGFpbmVyIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJzdHlsZSIsImRpc3BsYXkiLCJhbGlnbkl0ZW1zIiwiZ2FwIiwiekluZGV4IiwibWFya2VyIiwiYmFja2dyb3VuZCIsImJvcmRlclJhZGl1cyIsImN1cnNvciIsImxhYmVsIiwiY2xhc3NOYW1lIiwiaW5uZXJUZXh0IiwidGV4dCIsImZvbnRTaXplIiwibWF4V2lkdGgiLCJvdmVyZmxvdyIsInRleHRPdmVyZmxvdyIsIndoaXRlU3BhY2UiLCJhcHBlbmRDaGlsZCIsImZvckVhY2giLCJldiIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwiVmlld2VyIiwicm91dGVyIiwiaW1hZ2VJZCIsInF1ZXJ5Iiwib3BlbnNlYWRyYWdvbkNvbnRhaW5lclJlZiIsInZpZXdlckluc3RhbmNlUmVmIiwiaW1hZ2UiLCJzZXRJbWFnZSIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwiZXJyb3IiLCJzZXRFcnJvciIsIm5vdGVzIiwic2V0Tm90ZXMiLCJzaG93U2lkZWJhciIsInNldFNob3dTaWRlYmFyIiwiYWRkT3ZlcmxheSIsIk9wZW5TZWFkcmFnb24iLCJ2aWV3ZXIiLCJlbGVtZW50IiwibG9jYXRpb24iLCJQb2ludCIsIngiLCJ5IiwiZmV0Y2hJbWFnZSIsInJlc3BvbnNlIiwiZmV0Y2giLCJvayIsIkVycm9yIiwiZGF0YSIsImpzb24iLCJmb3VuZEltYWdlIiwiZmluZCIsImltZyIsImVyciIsIm1lc3NhZ2UiLCJjdXJyZW50IiwidGhlbiIsIk9wZW5TZWFkcmFnb25Nb2R1bGUiLCJkZWZhdWx0IiwicHJlZml4VXJsIiwidGlsZVNvdXJjZXMiLCJ0aWxlU291cmNlIiwiYW5pbWF0aW9uVGltZSIsImJsZW5kVGltZSIsImNvbnN0cmFpbkR1cmluZ1BhbiIsIm1heFpvb21QaXhlbFJhdGlvIiwibWluWm9vbUxldmVsIiwidmlzaWJpbGl0eVJhdGlvIiwiem9vbVBlclNjcm9sbCIsImFkZEhhbmRsZXIiLCJzZXRUaW1lb3V0Iiwic2F2ZWQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicGFyc2VkIiwiSlNPTiIsInBhcnNlIiwiZXZlbnQiLCJxdWljayIsInZpZXdwb3J0UG9pbnQiLCJ2aWV3cG9ydCIsInBvaW50RnJvbVBpeGVsIiwibmV3Tm90ZSIsIkRhdGUiLCJub3ciLCJwcmV2IiwidXBkYXRlZCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJkZXN0cm95IiwiZGl2IiwiYW5pbWF0aW9uIiwidmFyaWFudCIsInJvbGUiLCJzcGFuIiwicCIsImhyZWYiLCJ0aXRsZSIsInRvcCIsImxlZnQiLCJmbGV4RGlyZWN0aW9uIiwianVzdGlmeUNvbnRlbnQiLCJoMiIsIm1hcmdpblRvcCIsImxldHRlclNwYWNpbmciLCJvcGFjaXR5IiwicmVmIiwicmlnaHQiLCJzaXplIiwib25DbGljayIsImVsIiwicXVlcnlTZWxlY3RvciIsInJlbW92ZU92ZXJsYXkiLCJyZW1vdmVJdGVtIiwiYm90dG9tIiwicGFzc0hyZWYiLCJsZWdhY3lCZWhhdmlvciIsImJvcmRlckNvbG9yIiwic2hvdyIsIm9uSGlkZSIsInBsYWNlbWVudCIsIkhlYWRlciIsImNsb3NlQnV0dG9uIiwiVGl0bGUiLCJCb2R5IiwibGVuZ3RoIiwibWFwIiwiaWR4IiwiSXRlbSIsImlucHV0IiwidHlwZSIsInBsYWNlaG9sZGVyIiwidmFsdWUiLCJvbkNoYW5nZSIsIm5ld1RleHQiLCJ0YXJnZXQiLCJuIiwicGFuVG8iLCJ6b29tVG8iLCJtYXJrZXJDb250YWluZXIiLCJmaWx0ZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./pages/viewer/[imageId].js\n"));

/***/ })

});